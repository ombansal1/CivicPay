<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CivicPay</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600;700&family=Nunito+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#f5f9ff; --bg2:#ffffff; --line:#e8eef6;
      --primary:#2f6fed; --text:#0f172a; --muted:#6b7280;
    }

    /* Global typography */
    *{box-sizing:border-box;font-family:"Poppins","Inter","Nunito Sans",sans-serif}
    html,body{height:100%}
    body{
      margin:0;color:var(--text);
      background: linear-gradient(180deg, #f5f9ff 0%, #f8fbff 50%, #ffffff 100%);
      letter-spacing:0.3px; /* body rule */
      line-height:1.6;      /* body rule */
      font-weight:400;      /* body rule */
    }
    h1,h2,h3,h4{font-weight:600;line-height:1.4;margin:0 0 6px 0} /* headings rule */
    p{margin:4px 0 10px 0}
    a{color:inherit;text-decoration:none}

    .app{display:flex;min-height:100vh}

    /* Sidebar */
    .sidebar{
      width:240px;background:rgba(255,255,255,.92);
      border-right:1px solid var(--line);padding:20px 16px;
      backdrop-filter: blur(6px); position:sticky;top:0;height:100vh
    }
    .brand{display:flex;align-items:center;gap:10px;margin:4px 0 18px}
    .brand img{height:56px;display:block} /* logo 50–60px */
    .nav a{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:12px;color:#111827;margin:2px 0}
    .nav a:hover{background:#eef4ff}
    .logout{position:absolute;bottom:16px;left:16px;right:16px}
    .btn{display:inline-block;border:1px solid var(--line);background:#fff;padding:10px 14px;border-radius:12px}
    .btn.primary{
      background: linear-gradient(135deg, var(--primary) 0%, #3c7cf7 100%);
      color:#fff;border:none;
      box-shadow:0 6px 20px rgba(47,111,237,.20), 0 2px 6px rgba(47,111,237,.16);
      transition: transform .05s ease, filter .2s ease;
    }
    .btn.primary:hover{filter:brightness(1.03)}
    .btn.primary:active{transform:translateY(1px)}
    .btn.ghost{background:#fff}

    /* Content */
    .content{flex:1;padding:32px}
    .public{display:flex;align-items:center;justify-content:center}

    /* Cards & UI */
    .card{background:var(--bg2);border:1px solid var(--line);border-radius:16px;padding:22px;box-shadow: 0 2px 8px rgba(16,24,40,.04)}
    .muted{color:var(--muted)}
    .input{width:100%;padding:12px 13px;border:1px solid var(--line);border-radius:12px;background:#fff}
    .input:focus{outline:none;border-color:#cfe0ff;box-shadow:0 0 0 3px #e9f0ff}
    .tabs{display:flex;gap:8px;margin:10px 0 16px}
    .tab{padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:#fff;color:#111827;cursor:pointer}
    .tab.active{background:#eef4ff;border-color:#d9e6ff}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
    .row{display:flex;justify-content:space-between;gap:12px;margin:8px 0}
    .pill{font-size:.78rem;color:#6b7280;background:#f3f4f6;padding:4px 10px;border-radius:999px;border:1px solid #e5e7eb}

    @media (max-width: 920px){
      .content{padding:22px}
      .sidebar{width:210px}
    }
  </style>
</head>
<body>

{% set logged_in = session.get('user_id') and session.get('citizen_id') %}

<div class="app">
  {% if logged_in %}
    <aside class="sidebar">
      <div class="brand">
        <img src="{{ url_for('static', filename='img/civicpay-logo.png') }}" alt="CivicPay" />
      </div>
      <nav class="nav">
        <a href="{{ url_for('dashboard') }}"> Dashboard</a>
        <a href="{{ url_for('fastag') }}"> Fastag</a>
        <a href="{{ url_for('feedback') }}"> Feedback</a>
      </nav>
      <div class="logout">
        <a class="btn ghost" href="{{ url_for('logout') }}">← Logout</a>
      </div>
    </aside>
  {% endif %}

  <main class="content {% if not logged_in %}public{% endif %}">
    {% block content %}{% endblock %}
  </main>
</div>

</body>
</html>
